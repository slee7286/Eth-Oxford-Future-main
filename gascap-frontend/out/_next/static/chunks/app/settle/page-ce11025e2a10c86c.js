(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[872],{1190:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});let s=(0,l(4294).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},1849:(e,t,l)=>{Promise.resolve().then(l.bind(l,1957))},1957:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>j});var s=l(5155),r=l(2115),a=l(7267),i=l(4730),n=l(3998),c=l(5894),d=l(8678),o=l(6830),x=l(2619),m=l.n(x),h=l(1190),u=l(9784),p=l(4294);let f=(0,p.A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),g=(0,p.A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var N=l(2593);function j(){let{address:e,provider:t,connect:l}=(0,i.v)(),{contractState:x,currentGasPrice:p,refresh:j}=(0,i.Q)(e),[v,w]=(0,r.useState)(!1),{toast:b}=(0,c.dj)(),y=async()=>{if(e&&t){w(!0);try{let e=await t.getSigner(),l=new d.NZ(o.P.CONTRACT_ADDRESS,o.p,e),s=await l.settleContract();await s.wait(),b({title:"Contract Settled",description:"Settlement price locked from FTSO oracle."}),j()}catch(e){b({title:"Settlement Failed",description:(null==e?void 0:e.reason)||(null==e?void 0:e.message)||"Unknown error",variant:"destructive"})}finally{w(!1)}}},S=!!x&&Number(x.expiryTimestamp)<=Math.floor(Date.now()/1e3),T=S&&!(null==x?void 0:x.isSettled);return(0,s.jsxs)("div",{className:"flex flex-col h-screen bg-background",children:[(0,s.jsx)(a.Y,{address:e,gasPrice:p,state:x,onConnect:l}),(0,s.jsx)("main",{className:"flex-1 overflow-auto p-6 flex flex-col items-center",children:(0,s.jsxs)("div",{className:"w-full max-w-2xl space-y-6",children:[(0,s.jsxs)(m(),{href:"/",className:"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground",children:[(0,s.jsx)(h.A,{className:"w-4 h-4"})," Back to Terminal"]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center text-primary",children:(0,s.jsx)(u.A,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Settlement Hub"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Trigger contract settlement once the expiry is reached."})]})]}),(0,s.jsx)("div",{className:"bg-panel border rounded-xl overflow-hidden shadow-2xl",children:(0,s.jsxs)("div",{className:"p-8 space-y-8",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(null==x?void 0:x.isSettled)?(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-green-500/20 text-green-500 flex items-center justify-center",children:(0,s.jsx)(f,{className:"w-10 h-10"})}):S?(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-amber-500/20 text-amber-500 flex items-center justify-center animate-pulse",children:(0,s.jsx)(g,{className:"w-10 h-10"})}):(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-blue-500/20 text-blue-500 flex items-center justify-center",children:(0,s.jsx)(N.A,{className:"w-10 h-10"})}),(0,s.jsxs)("div",{className:"space-y-1 text-white",children:[(0,s.jsx)("h3",{className:"text-xl font-bold uppercase tracking-tight",children:(null==x?void 0:x.isSettled)?"Contract Settled":S?"Ready for Settlement":"Contract Active"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:(null==x?void 0:x.isSettled)?"Settled at ".concat(x.settlementPriceGwei.toString()," gwei. Traders can now claim payouts."):S?"The contract has expired. Anyone can trigger settlement.":"Trading continues until the expiry timestamp."})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-px bg-white/5 border border-white/5 rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-black/40 p-4 flex flex-col items-center",children:[(0,s.jsx)("span",{className:"text-[10px] text-muted-foreground font-bold uppercase",children:"Strike Price"}),(0,s.jsxs)("span",{className:"text-lg font-code text-white",children:[(null==x?void 0:x.strikePriceGwei.toString())||"---"," GWEI"]})]}),(0,s.jsxs)("div",{className:"bg-black/40 p-4 flex flex-col items-center",children:[(0,s.jsx)("span",{className:"text-[10px] text-muted-foreground font-bold uppercase",children:"Expiry"}),(0,s.jsx)("span",{className:"text-lg font-code text-white",children:x?new Date(1e3*Number(x.expiryTimestamp)).toLocaleString():"---"})]})]}),(null==x?void 0:x.isSettled)&&(0,s.jsxs)("div",{className:"bg-emerald-500/10 border border-emerald-500/20 rounded-lg p-4 text-center",children:[(0,s.jsx)("span",{className:"text-[10px] text-emerald-400 font-bold uppercase",children:"Settlement Price"}),(0,s.jsxs)("div",{className:"text-2xl font-code font-bold text-emerald-400",children:[x.settlementPriceGwei.toString()," GWEI"]})]}),(0,s.jsx)(n.$,{className:"w-full h-14 text-lg font-bold bg-primary hover:bg-primary/90 text-primary-foreground",disabled:!T||v||!e,onClick:y,children:v?"SETTLING...":(null==x?void 0:x.isSettled)?"SETTLEMENT COMPLETE":S?"SETTLE CONTRACT":"NOT YET EXPIRED"})]})})]})})]})}}},e=>{e.O(0,[822,239,145,441,255,358],()=>e(e.s=1849)),_N_E=e.O()}]);