(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2411:(e,t,s)=>{Promise.resolve().then(s.bind(s,5225))},5142:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var r=s(5155),a=s(2115),i=s(4269);let l=a.forwardRef((e,t)=>{let{className:s,type:a,...l}=e;return(0,r.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});l.displayName="Input"},5225:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>K});var r=s(5155),a=s(2115),i=s(7267),l=s(4266);let n="flare_ftso_v4_ticks",c=[];var d=s(574),o=s(4269);let x=d.bL,m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(d.B8,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a})});m.displayName=d.B8.displayName;let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(d.l9,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...a})});u.displayName=d.l9.displayName;let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(d.UC,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});h.displayName=d.UC.displayName;var p=s(1272),f=s(9795),b=s(3063),g=s(944),N=s(2033),j=s(2996),v=s(644);function w(e){let{strikePrice:t,settlementPrice:s,isSettled:i,timeframe:d,onTimeframeChange:o}=e,h=(0,a.useRef)(null),w=(0,a.useRef)(null),y=(0,a.useRef)(null),S=(0,a.useRef)([]),[C,k]=(0,a.useState)(!1),[R,L]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{k(!0)},[]),(0,a.useEffect)(()=>{if(!C||!h.current)return;let e=()=>{var e,t;null==(t=w.current)||t.applyOptions({width:null==(e=h.current)?void 0:e.clientWidth})};return w.current=(0,l.R9)(h.current,{layout:{background:{color:"transparent"},textColor:"#9CA3AF",fontSize:10,fontFamily:"Source Code Pro"},grid:{vertLines:{color:"rgba(255, 255, 255, 0.03)"},horzLines:{color:"rgba(255, 255, 255, 0.03)"}},crosshair:{mode:0,vertLine:{labelBackgroundColor:"#FFB830",color:"rgba(255, 184, 48, 0.4)",style:2},horzLine:{labelBackgroundColor:"#FFB830",color:"rgba(255, 184, 48, 0.4)",style:2}},rightPriceScale:{borderColor:"rgba(255, 255, 255, 0.05)",scaleMargins:{top:.1,bottom:.2}},timeScale:{borderColor:"rgba(255, 255, 255, 0.05)",timeVisible:!0,secondsVisible:!1}}),y.current=w.current.addCandlestickSeries({upColor:"#10B981",downColor:"#EF4444",borderVisible:!1,wickUpColor:"#10B981",wickDownColor:"#EF4444"}),window.addEventListener("resize",e),()=>{var t;window.removeEventListener("resize",e),null==(t=w.current)||t.remove()}},[C]),(0,a.useEffect)(()=>{let e=()=>{if(!y.current)return;let e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(0===c.length)try{let e=localStorage.getItem(n);e&&(c=JSON.parse(e))}catch(e){}if(0===c.length)return[];let t=60*e,s=[],r=null;return c.forEach(e=>{let a=Math.floor(e.time/t)*t;r&&r.time===a?(r.high=Math.max(r.high,e.price),r.low=Math.min(r.low,e.price),r.close=e.price):(r&&s.push(r),r={time:a,open:e.price,high:e.price,low:e.price,close:e.price})}),r&&s.push(r),s.sort((e,t)=>e.time-t.time)}(d);e.length>0?(y.current.setData(e),L(!0)):L(!1),S.current.forEach(e=>{var t;return null==(t=y.current)?void 0:t.removePriceLine(e)}),S.current=[],t&&e.length>0&&S.current.push(y.current.createPriceLine({price:t,color:"#FFB830",lineWidth:1,lineStyle:1,axisLabelVisible:!0,title:"STRIKE"})),i&&s&&e.length>0&&S.current.push(y.current.createPriceLine({price:s,color:"#10B981",lineWidth:1,lineStyle:0,axisLabelVisible:!0,title:"SETTLEMENT"}))};e();let r=setInterval(e,3e3);return()=>clearInterval(r)},[d,t,s,i]),(0,r.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,r.jsxs)("div",{className:"h-9 border-b border-white/5 bg-white/[0.01] px-4 flex items-center justify-between shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsx)(x,{value:d.toString(),onValueChange:e=>o(parseInt(e)),children:(0,r.jsx)(m,{className:"bg-transparent h-7 p-0 gap-3",children:["1","5","15","60"].map(e=>(0,r.jsxs)(u,{value:e,className:"text-[10px] h-6 px-0 min-w-0 rounded-none bg-transparent data-[state=active]:bg-transparent data-[state=active]:text-primary border-b-2 border-transparent data-[state=active]:border-primary transition-all font-bold uppercase tracking-tighter",children:[e,"M"]},e))})}),(0,r.jsx)("div",{className:"h-4 w-px bg-white/10"}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-muted-foreground",children:[(0,r.jsx)(p.A,{className:"w-3.5 h-3.5 cursor-pointer hover:text-white transition-colors"}),(0,r.jsx)(f.A,{className:"w-3.5 h-3.5 cursor-pointer hover:text-white transition-colors"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(b.A,{className:"w-3.5 h-3.5 text-muted-foreground cursor-pointer hover:text-white"}),(0,r.jsx)(g.A,{className:"w-3.5 h-3.5 text-muted-foreground cursor-pointer hover:text-white"})]})]}),(0,r.jsxs)("div",{className:"flex-1 relative group bg-black/40",children:[!R&&(0,r.jsxs)("div",{className:"absolute inset-0 z-20 flex flex-col items-center justify-center bg-black/60 backdrop-blur-sm gap-4",children:[(0,r.jsx)(N.A,{className:"w-8 h-8 text-primary animate-spin"}),(0,r.jsxs)("div",{className:"text-center space-y-1",children:[(0,r.jsx)("p",{className:"text-xs font-bold uppercase tracking-widest text-white",children:"Connecting to FTSO Feed"}),(0,r.jsx)("p",{className:"text-[10px] text-muted-foreground",children:"Awaiting gas price data from Flare oracle..."})]})]}),(0,r.jsx)("div",{ref:h,className:"w-full h-full"}),(0,r.jsx)("div",{className:"absolute top-4 left-4 z-10 pointer-events-none",children:(0,r.jsx)("div",{className:"bg-black/60 backdrop-blur-md px-3 py-1 rounded-sm border border-white/5 flex items-center gap-2 shadow-2xl",children:R?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.A,{className:"w-3 h-3 text-emerald-500"}),(0,r.jsx)("span",{className:"text-[10px] font-bold tracking-widest text-white uppercase",children:"Live FTSO Feed"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.A,{className:"w-3 h-3 text-red-400"}),(0,r.jsx)("span",{className:"text-[10px] font-bold tracking-widest text-muted-foreground uppercase",children:"Waiting for data..."})]})})})]})]})}var y=s(3998),S=s(5142),C=s(6444),k=s(5130);let R=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsxs)(k.bL,{ref:t,className:(0,o.cn)("relative flex w-full touch-none select-none items-center",s),...a,children:[(0,r.jsx)(k.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,r.jsx)(k.Q6,{className:"absolute h-full bg-primary"})}),(0,r.jsx)(k.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});R.displayName=k.bL.displayName;let L=(0,s(3101).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function T(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)(L({variant:s}),t),...a})}var E=s(5894),A=s(8678),O=s(9794),P=s(6830),F=s(6065),I=s(5039),D=s(6767);function _(e){let{address:t,provider:s,refresh:i,disabled:l,currentPrice:n}=e,[c,d]=(0,a.useState)("LONG"),[h,p]=(0,a.useState)("100"),[f,b]=(0,a.useState)("0.5"),[g,N]=(0,a.useState)(1),[j,v]=(0,a.useState)(!1),{toast:w}=(0,E.dj)(),k=n?Number(n):0,L=parseFloat(f)||0,_=k>0?"LONG"===c?k*(1-1/Math.max(g,1)+.05):k*(1+1/Math.max(g,1)-.05):0,G=async()=>{if(!t||!s)return void w({title:"Wallet not connected",description:"Please connect MetaMask first.",variant:"destructive"});if(!h||0>=parseInt(h))return void w({title:"Invalid quantity",description:"Enter a valid position size.",variant:"destructive"});if(!f||0>=parseFloat(f))return void w({title:"Invalid collateral",description:"Enter collateral amount in C2FLR.",variant:"destructive"});v(!0);try{let e=await s.getSigner(),r=new A.NZ(P.P.CONTRACT_ADDRESS,P.p,e),a=BigInt(h),l=(0,O.XS)(f,"ether");try{if(!(await r.getUserProfile(t))[0]){w({title:"Registering...",description:"First trade â€” registering your account."});let e=await r.registerUser("trader","");await e.wait(),w({title:"Registered!",description:"Account registered. Opening position..."})}}catch(e){try{let e=await r.registerUser("trader","");await e.wait()}catch(e){}}let n="LONG"===c?await r.mintLong(a,BigInt(g),0,{value:l}):await r.mintShort(a,BigInt(g),0,{value:l});w({title:"Transaction Submitted",description:"Opening ".concat(c," position...")}),await n.wait(),w({title:"Position Opened!",description:"".concat(c," ").concat(h," contracts @ ").concat(g,"x with ").concat(f," C2FLR collateral.")}),i()}catch(e){w({title:"Transaction Failed",description:((null==e?void 0:e.reason)||(null==e?void 0:e.message)||"Unknown error").slice(0,200),variant:"destructive"})}finally{v(!1)}};return(0,r.jsxs)("div",{className:"flex flex-col gap-5 py-4 px-3 bg-[#080808]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(T,{variant:"outline",className:"text-[9px] h-4 px-1.5 bg-primary/10 text-primary border-primary/20 font-bold uppercase",children:"Futures"}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)("div",{className:(0,o.cn)("w-1.5 h-1.5 rounded-full",k>0?"bg-emerald-500 animate-pulse":"bg-red-500")}),(0,r.jsx)("span",{className:(0,o.cn)("text-[9px] font-bold uppercase tracking-wider",k>0?"text-emerald-400":"text-red-400"),children:k>0?"FTSO Live":"No Feed"})]})]}),(0,r.jsx)(x,{value:c,onValueChange:e=>d(e),className:"w-full",children:(0,r.jsxs)(m,{className:"grid w-full grid-cols-2 h-10 bg-white/5 p-1 rounded-sm",children:[(0,r.jsx)(u,{value:"LONG",className:"rounded-sm font-black text-[10px] uppercase tracking-wider data-[state=active]:bg-emerald-600 data-[state=active]:text-white",children:"Long (Hedge Spike)"}),(0,r.jsx)(u,{value:"SHORT",className:"rounded-sm font-black text-[10px] uppercase tracking-wider data-[state=active]:bg-rose-600 data-[state=active]:text-white",children:"Short Gas"})]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"flex justify-between px-0.5",children:(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(C.J,{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-tight",children:"Quantity (Contracts)"}),(0,r.jsx)(D.Bc,{children:(0,r.jsxs)(D.m_,{children:[(0,r.jsx)(D.k$,{children:(0,r.jsx)(F.A,{className:"w-3 h-3 text-muted-foreground/50"})}),(0,r.jsx)(D.ZI,{children:"Number of gas futures contracts to open."})]})})]})}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(S.p,{type:"number",value:h,onChange:e=>p(e.target.value),className:"bg-white/5 border-white/5 text-white font-code h-11 rounded-sm focus:ring-0 focus:border-white/20 text-sm pr-16",placeholder:"0"}),(0,r.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] text-muted-foreground font-bold uppercase pointer-events-none",children:"GCAP"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"flex justify-between px-0.5",children:(0,r.jsx)(C.J,{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-tight",children:"Collateral (C2FLR)"})}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(S.p,{type:"number",value:f,onChange:e=>b(e.target.value),className:"bg-white/5 border-white/5 text-white font-code h-11 rounded-sm focus:ring-0 focus:border-white/20 text-sm pr-16",placeholder:"0.0",step:"0.1"}),(0,r.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] text-muted-foreground font-bold uppercase pointer-events-none",children:"C2FLR"})]})]}),(0,r.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,r.jsxs)("div",{className:"flex justify-between px-0.5",children:[(0,r.jsx)(C.J,{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-tight",children:"Leverage"}),(0,r.jsxs)(T,{variant:"secondary",className:"font-code text-[11px] h-5 bg-white/10",children:[g,"x"]})]}),(0,r.jsx)(R,{value:[g],onValueChange:e=>N(e[0]),max:20,min:1,step:1,className:"h-1"})]})]}),(0,r.jsxs)("div",{className:"bg-white/[0.02] border border-white/[0.05] rounded-sm p-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between text-[11px]",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Collateral"}),(0,r.jsxs)("span",{className:"text-white font-code",children:[L.toFixed(4)," C2FLR"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-[11px]",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Leverage"}),(0,r.jsxs)("span",{className:"text-white font-code",children:[g,"x"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-[11px]",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Current Gas Price"}),(0,r.jsxs)("span",{className:"text-white font-code",children:[k>0?k.toFixed(2):"---"," GWEI"]})]}),_>0&&(0,r.jsxs)("div",{className:"flex justify-between text-[11px]",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Est. Liquidation"}),(0,r.jsxs)("span",{className:"text-orange-500 font-code font-bold",children:[_.toFixed(2)," GWEI"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-[11px]",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Contract"}),(0,r.jsxs)("a",{href:"".concat(P.P.EXPLORER_URL,"/address/").concat(P.P.CONTRACT_ADDRESS),target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 font-code text-[10px] hover:underline",children:[P.P.CONTRACT_ADDRESS.slice(0,6),"...",P.P.CONTRACT_ADDRESS.slice(-4)]})]})]}),(0,r.jsx)(y.$,{className:(0,o.cn)("w-full font-black h-14 uppercase tracking-[0.2em] rounded-sm text-xs transition-all active:scale-[0.98] shadow-lg","LONG"===c?"bg-emerald-600 hover:bg-emerald-700 text-white shadow-emerald-500/20":"bg-rose-600 hover:bg-rose-700 text-white shadow-rose-500/20"),disabled:j||l||!t,onClick:G,children:t?j?"PENDING...":"LONG"===c?"Open Long ".concat(g,"x"):"Open Short ".concat(g,"x"):"CONNECT WALLET"}),(0,r.jsxs)("div",{className:"mt-auto pt-4 border-t border-white/5 flex items-start gap-3 text-[9px] text-muted-foreground leading-relaxed italic",children:[(0,r.jsx)(I.A,{className:"w-4 h-4 shrink-0 text-orange-500/50"}),(0,r.jsx)("p",{children:"GasCap Futures settle based on FTSO oracle prices. Powered by Flare Network. Testnet only."})]})]})}var G=s(1851),M=s(2925);function B(e){let{position:t,address:s,contractState:i,provider:l,refresh:n}=e,[c,d]=(0,a.useState)("POSITIONS"),[p,f]=(0,a.useState)(!1),{toast:b}=(0,E.dj)(),g=async()=>{if(l){f(!0);try{let e=await l.getSigner(),t=new A.NZ(P.P.CONTRACT_ADDRESS,P.p,e),s=await t.claimPayout();await s.wait(),b({title:"Payout Claimed",description:"Settlement payout received successfully."}),n()}catch(e){b({title:"Claim Failed",description:(null==e?void 0:e.reason)||(null==e?void 0:e.message)||"Unknown error",variant:"destructive"})}finally{f(!1)}}},N=t&&t.exists&&BigInt(t.quantity)>0n,j="text-[10px] h-full px-0 min-w-0 rounded-none bg-transparent data-[state=active]:bg-transparent data-[state=active]:text-primary border-b-2 border-transparent data-[state=active]:border-primary transition-all font-bold uppercase tracking-wider";return(0,r.jsxs)(x,{value:c,onValueChange:d,className:"h-full flex flex-col bg-[#0a0a0a]",children:[(0,r.jsx)("div",{className:"h-10 border-b border-white/5 flex items-center px-4 justify-between bg-white/[0.01]",children:(0,r.jsxs)(m,{className:"bg-transparent h-full p-0 gap-6",children:[(0,r.jsxs)(u,{value:"POSITIONS",className:j,children:["Positions (",+!!N,")"]}),(0,r.jsx)(u,{value:"CONTRACT",className:j,children:"Contract Info"})]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-auto",children:[(0,r.jsx)(h,{value:"POSITIONS",className:"m-0 h-full",children:N?(0,r.jsx)("div",{className:"w-full overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-[11px] font-code border-collapse",children:[(0,r.jsx)("thead",{className:"text-muted-foreground uppercase font-bold border-b border-white/5 bg-white/[0.01] sticky top-0 z-10",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"text-left py-3 px-4 font-bold",children:"Market"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 font-bold",children:"Side"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 font-bold",children:"Size"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 font-bold",children:"Collateral"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 font-bold",children:"Status"}),(0,r.jsx)("th",{className:"text-right py-3 px-4 font-bold",children:"Action"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-white/[0.03]",children:(0,r.jsxs)("tr",{className:"hover:bg-white/[0.02] transition-colors",children:[(0,r.jsx)("td",{className:"py-3 px-4 font-bold text-white uppercase",children:"GASCAP-FUTURES"}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)(T,{className:(0,o.cn)("text-[9px] h-4 rounded-sm border-none font-black",t.isLong?"bg-emerald-500/10 text-emerald-400":"bg-rose-500/10 text-rose-400"),children:t.isLong?"LONG":"SHORT"})}),(0,r.jsxs)("td",{className:"py-3 px-4 text-white",children:[t.quantity.toString()," contracts (",t.leverage.toString(),"x)"]}),(0,r.jsxs)("td",{className:"py-3 px-4 text-white/70",children:[(0,O.Js)(t.collateralWei,18)," C2FLR"]}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:(0,o.cn)("text-[10px] font-bold uppercase",t.isClaimed?"text-emerald-400":(null==i?void 0:i.isSettled)?"text-orange-400":"text-white/40"),children:t.isClaimed?"CLAIMED":(null==i?void 0:i.isSettled)?"SETTLEABLE":"OPEN"})}),(0,r.jsx)("td",{className:"py-3 px-4 text-right",children:(null==i?void 0:i.isSettled)&&!t.isClaimed&&(0,r.jsx)(y.$,{size:"sm",className:"h-7 px-3 bg-primary hover:bg-primary/80 text-primary-foreground text-[10px] uppercase font-bold",onClick:g,disabled:p,children:p?"Claiming...":"Claim Payout"})})]})})]})}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full gap-2 text-muted-foreground/30",children:[(0,r.jsx)(G.A,{className:"w-8 h-8 opacity-20"}),(0,r.jsx)("span",{className:"text-xs font-bold uppercase tracking-widest italic",children:"No Open Positions"}),(0,r.jsx)("span",{className:"text-[10px] text-muted-foreground/20",children:"Connect wallet and open a position to start trading"})]})}),(0,r.jsx)(h,{value:"CONTRACT",className:"m-0 h-full p-4",children:(0,r.jsxs)("div",{className:"space-y-3 font-code text-[11px]",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Contract"}),(0,r.jsxs)("a",{href:"".concat(P.P.EXPLORER_URL,"/address/").concat(P.P.CONTRACT_ADDRESS),target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline flex items-center gap-1",children:[P.P.CONTRACT_ADDRESS.slice(0,10),"...",P.P.CONTRACT_ADDRESS.slice(-8)," ",(0,r.jsx)(M.A,{className:"w-3 h-3"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Network"}),(0,r.jsxs)("span",{className:"text-white",children:["Flare Coston2 (Chain ",P.P.CHAIN_ID,")"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Strike Price"}),(0,r.jsxs)("span",{className:"text-white",children:[i?i.strikePriceGwei.toString():"---"," Gwei"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Settled"}),(0,r.jsx)("span",{className:(null==i?void 0:i.isSettled)?"text-emerald-400":"text-white",children:(null==i?void 0:i.isSettled)?"Yes":"No"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Participants"}),(0,r.jsx)("span",{className:"text-white",children:(null==i?void 0:i.participantCount.toString())||"0"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Pool Liquidity"}),(0,r.jsxs)("span",{className:"text-white",children:[i?(Number(i.totalLiquidityWei)/1e18).toFixed(4):"0"," C2FLR"]})]})]})})]})]})}var U=s(4730),W=s(4374),z=s(2863),V=s(212),H=s(2593),J=s(6874),q=s(6943);function X(e){let{currentPrice:t,contractState:s}=e,[i,l]=(0,a.useState)("MARKET"),[n,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)(Math.floor(Date.now()/1e3)),{recentTrades:p}=(0,U.Q)(null);(0,a.useEffect)(()=>{c(!0)},[]),(0,a.useEffect)(()=>{let e=setInterval(()=>h(Math.floor(Date.now()/1e3)),1e3);return()=>clearInterval(e)},[]);let f=t?Number(t):0,b=s?Number(s.strikePriceGwei):0,g=(s?Number(s.expiryTimestamp):0)-d,N=g<=0,j=s?Number((0,O.Js)(s.totalLiquidityWei,18)):0,v=s?Number(s.participantCount):0,w=f>0&&b>0?f-b:0,y=b>0?w/b*100:0,S=w>0;return n?(0,r.jsxs)("div",{className:"h-full flex flex-col bg-[#080808]",children:[(0,r.jsx)("div",{className:"h-10 border-b border-white/5 flex items-center px-3 bg-white/[0.01]",children:(0,r.jsx)(x,{value:i,onValueChange:l,className:"w-full",children:(0,r.jsx)(m,{className:"bg-transparent h-8 p-0 gap-4",children:["MARKET","TRADES"].map(e=>(0,r.jsx)(u,{value:e,className:"text-[10px] h-full px-0 min-w-0 rounded-none bg-transparent data-[state=active]:bg-transparent data-[state=active]:text-primary border-b-2 border-transparent data-[state=active]:border-primary transition-all font-bold uppercase tracking-widest",children:e},e))})})}),(0,r.jsx)("div",{className:"flex-1 overflow-hidden p-3",children:"MARKET"===i?(0,r.jsxs)("div",{className:"flex flex-col h-full font-code text-[11px] space-y-3 overflow-y-auto",children:[(0,r.jsxs)("div",{className:"bg-white/[0.02] border border-white/[0.05] rounded-sm p-3",children:[(0,r.jsxs)("div",{className:"text-[9px] text-muted-foreground font-bold uppercase tracking-widest mb-2 flex items-center gap-1.5",children:[(0,r.jsx)(G.A,{className:"w-3 h-3 text-emerald-500"}),"FTSO Gas Index (Live)"]}),(0,r.jsxs)("div",{className:"flex items-end justify-between",children:[(0,r.jsx)("span",{className:(0,o.cn)("text-2xl font-bold leading-none",f>0?"text-emerald-400":"text-muted-foreground"),children:f>0?f.toFixed(2):"---"}),f>0&&(0,r.jsxs)("div",{className:(0,o.cn)("flex items-center gap-1 text-[10px] font-bold",S?"text-emerald-400":"text-rose-400"),children:[S?(0,r.jsx)(W.A,{className:"w-3 h-3"}):(0,r.jsx)(z.A,{className:"w-3 h-3"}),w>0?"+":"",w.toFixed(2)," (",y>0?"+":"",y.toFixed(1),"%)"]})]}),(0,r.jsx)("div",{className:"text-[9px] text-muted-foreground mt-1",children:"BTC(50%) + ETH(30%) + FLR(20%) weighted index"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{className:"bg-white/[0.02] border border-white/[0.05] rounded-sm p-2.5",children:[(0,r.jsxs)("div",{className:"text-[9px] text-muted-foreground font-bold uppercase tracking-widest flex items-center gap-1 mb-1",children:[(0,r.jsx)(V.A,{className:"w-3 h-3 text-amber-500"}),"Strike"]}),(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:b>0?b:"---"})]}),(0,r.jsxs)("div",{className:"bg-white/[0.02] border border-white/[0.05] rounded-sm p-2.5",children:[(0,r.jsxs)("div",{className:"text-[9px] text-muted-foreground font-bold uppercase tracking-widest flex items-center gap-1 mb-1",children:[(0,r.jsx)(H.A,{className:(0,o.cn)("w-3 h-3",N?"text-red-400":"text-blue-400")}),"Expiry"]}),(0,r.jsx)("span",{className:(0,o.cn)("font-bold text-sm",(null==s?void 0:s.isSettled)?"text-emerald-400":N?"text-red-400":"text-orange-400"),children:(null==s?void 0:s.isSettled)?"SETTLED":(()=>{if(N)return"EXPIRED";let e=Math.floor(g/3600),t=Math.floor(g%3600/60);return"".concat(e.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"),":").concat((g%60).toString().padStart(2,"0"))})()})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{className:"bg-white/[0.02] border border-white/[0.05] rounded-sm p-2.5",children:[(0,r.jsxs)("div",{className:"text-[9px] text-muted-foreground font-bold uppercase tracking-widest flex items-center gap-1 mb-1",children:[(0,r.jsx)(J.A,{className:"w-3 h-3 text-cyan-400"}),"Pool"]}),(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:j.toFixed(4)}),(0,r.jsx)("span",{className:"text-[9px] text-muted-foreground ml-1",children:"C2FLR"})]}),(0,r.jsxs)("div",{className:"bg-white/[0.02] border border-white/[0.05] rounded-sm p-2.5",children:[(0,r.jsxs)("div",{className:"text-[9px] text-muted-foreground font-bold uppercase tracking-widest flex items-center gap-1 mb-1",children:[(0,r.jsx)(q.A,{className:"w-3 h-3 text-purple-400"}),"Traders"]}),(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:v})]})]}),(0,r.jsxs)("div",{className:"bg-white/[0.02] border border-white/[0.05] rounded-sm p-3",children:[(0,r.jsx)("div",{className:"text-[9px] text-muted-foreground font-bold uppercase tracking-widest mb-2",children:"Settlement Outlook"}),(null==s?void 0:s.isSettled)?(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Settlement Price"}),(0,r.jsx)("span",{className:"text-emerald-400 font-bold",children:Number(s.settlementPriceGwei)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Outcome"}),(0,r.jsx)("span",{className:(0,o.cn)("font-bold",Number(s.settlementPriceGwei)>b?"text-emerald-400":"text-rose-400"),children:Number(s.settlementPriceGwei)>b?"LONGS WIN":"SHORTS WIN"})]})]}):f>0?(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"If settled now"}),(0,r.jsx)("span",{className:(0,o.cn)("font-bold",S?"text-emerald-400":"text-rose-400"),children:S?"LONGS win":"SHORTS win"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Distance to strike"}),(0,r.jsxs)("span",{className:"text-white font-bold",children:[Math.abs(w).toFixed(2)," (",Math.abs(y).toFixed(1),"%)"]})]})]}):(0,r.jsx)("span",{className:"text-muted-foreground/50 italic",children:"Awaiting FTSO feed..."})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-[9px] pt-1 border-t border-white/[0.05]",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Contract"}),(0,r.jsxs)("a",{href:"".concat(P.P.EXPLORER_URL,"/address/").concat(P.P.CONTRACT_ADDRESS),target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline flex items-center gap-1",children:[P.P.CONTRACT_ADDRESS.slice(0,8),"...",P.P.CONTRACT_ADDRESS.slice(-6),(0,r.jsx)(M.A,{className:"w-2.5 h-2.5"})]})]})]}):(0,r.jsx)("div",{className:"h-full flex flex-col font-code text-[10px] space-y-1 overflow-y-auto",children:0===p.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full opacity-20 italic",children:[(0,r.jsx)(G.A,{className:"w-8 h-8 mb-2"}),"No On-Chain Trades Yet"]}):p.map(e=>(0,r.jsxs)("div",{className:"flex flex-col border-b border-white/[0.03] py-2 px-1 hover:bg-white/[0.02]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,r.jsx)("span",{className:(0,o.cn)("font-bold",e.isLong?"text-emerald-500":"text-rose-500"),children:e.isLong?"LONG":"SHORT"}),(0,r.jsxs)("span",{className:"text-white/80",children:[e.quantity.toString()," @ ",e.leverage.toString(),"x"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center opacity-40 text-[9px]",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[e.trader.slice(0,6),"...",e.trader.slice(-4),(0,r.jsx)("a",{href:"".concat(P.P.EXPLORER_URL,"/tx/").concat(e.txHash),target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(M.A,{className:"w-2.5 h-2.5 hover:text-primary transition-colors"})})]}),(0,r.jsx)("span",{children:new Date(1e3*e.timestamp).toLocaleTimeString()})]})]},e.txHash))})})]}):(0,r.jsx)("div",{className:"h-full bg-[#080808]"})}function K(){let{address:e,provider:t,connect:s}=(0,U.v)(),{contractState:l,currentGasPrice:d,userPosition:o,connectionError:x,refresh:m}=(0,U.Q)(e),[u,h]=(0,a.useState)(1);return(0,a.useEffect)(()=>{d&&d.price>0n&&function(e){if(e.price&&!(e.price<=0)){if(0===c.length)try{let e=localStorage.getItem(n);e&&(c=JSON.parse(e))}catch(e){}if((!(c.length>0)||c[c.length-1].time!==e.time)&&(!(c.length>0)||c[c.length-1].price!==e.price||!(e.time-c[c.length-1].time<10))){c.push(e),c.length>2e3&&c.shift();try{localStorage.setItem(n,JSON.stringify(c))}catch(e){}}}}({price:Number(d.price),time:Number(d.timestamp)})},[d]),(0,r.jsxs)("div",{className:"flex flex-col h-screen bg-[#050505] text-foreground font-body overflow-hidden",children:[(0,r.jsx)(i.Y,{address:e,gasPrice:d,state:l,onConnect:s,connectionError:x}),(0,r.jsxs)("main",{className:"flex-1 flex min-h-0 overflow-hidden border-t border-white/5",children:[(0,r.jsxs)("div",{className:"flex-1 flex flex-col min-w-0 border-r border-white/5",children:[(0,r.jsx)("div",{className:"flex-[3] flex flex-col min-h-0 bg-black/20",children:(0,r.jsx)("div",{className:"flex-1 relative",children:(0,r.jsx)(w,{strikePrice:l?Number(l.strikePriceGwei):void 0,settlementPrice:l?Number(l.settlementPriceGwei):void 0,isSettled:null==l?void 0:l.isSettled,timeframe:u,onTimeframeChange:h})})}),(0,r.jsx)("div",{className:"flex-[2] border-t border-white/5 min-h-0",children:(0,r.jsx)(B,{position:o,address:e,contractState:l,provider:t,refresh:m})})]}),(0,r.jsxs)("div",{className:"w-[320px] flex flex-col shrink-0",children:[(0,r.jsx)("div",{className:"flex-1 border-b border-white/5 overflow-hidden",children:(0,r.jsx)(X,{currentPrice:null==d?void 0:d.price,contractState:l})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto bg-black/40",children:(0,r.jsx)(_,{address:e,provider:t,refresh:m,disabled:(null==l?void 0:l.isSettled)||!e,currentPrice:null==d?void 0:d.price})})]})]})]})}},6444:(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var r=s(5155),a=s(2115),i=s(2894),l=s(3101),n=s(4269);let c=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.b,{ref:t,className:(0,n.cn)(c(),s),...a})});d.displayName=i.b.displayName}},e=>{e.O(0,[822,239,118,317,635,145,441,255,358],()=>e(e.s=2411)),_N_E=e.O()}]);